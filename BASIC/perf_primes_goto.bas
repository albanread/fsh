' Prime Numbers Performance Test (Classic GOTO/GOSUB Style)
' Finds prime numbers using classic BASIC control flow with line numbers

' Main program
10 PRINT "Prime Numbers Performance Test (GOTO/GOSUB)"
20 PRINT "============================================="
30 PRINT ""

' Test 1: Count primes up to N using trial division
40 PRINT "Test 1: Count Primes with GOTO"
50 LIMIT = 1000
60 ITERATIONS = 100

' Warmup
70 GOSUB 1000
80 PRINT "Warmup: Found "; PRIMECOUNT; " primes up to "; LIMIT

' Main test
90 PRINT "Running prime counting test..."
100 I = 0
110 I = I + 1
120 IF I > ITERATIONS THEN GOTO 150
130 GOSUB 1000
140 GOTO 110
150 PRINT "Completed "; ITERATIONS; " iterations"
160 PRINT "Found "; PRIMECOUNT; " primes"
170 PRINT ""

' Test 2: Find Nth prime
180 PRINT "Test 2: Find Nth Prime"
190 TARGETPRIME = 100
200 ITERATIONS2 = 50
210 I = 0
220 I = I + 1
230 IF I > ITERATIONS2 THEN GOTO 260
240 GOSUB 2000
250 GOTO 220
260 PRINT "Completed "; ITERATIONS2; " iterations"
270 PRINT "Prime #"; TARGETPRIME; " is "; NTHPRIME
280 PRINT ""

' Test 3: Sum of primes
290 PRINT "Test 3: Sum of Primes"
300 LIMIT = 500
310 ITERATIONS3 = 100
320 I = 0
330 I = I + 1
340 IF I > ITERATIONS3 THEN GOTO 370
350 GOSUB 3000
360 GOTO 330
370 PRINT "Completed "; ITERATIONS3; " iterations"
380 PRINT "Sum of primes up to "; LIMIT; " is "; PRIMESUM
390 PRINT ""

400 PRINT "Performance test complete!"
410 END

' Subroutine: Count primes up to LIMIT
' Returns: PRIMECOUNT
1000 PRIMECOUNT = 0
1010 NUM = 2
1020 IF NUM > LIMIT THEN GOTO 1100
1030 ' Check if NUM is prime (GOSUB 5000)
1040 TESTNUM = NUM
1050 GOSUB 5000
1060 IF ISPRIME = 0 THEN GOTO 1080
1070 PRIMECOUNT = PRIMECOUNT + 1
1080 NUM = NUM + 1
1090 GOTO 1020
1100 RETURN

' Subroutine: Find Nth prime
' Input: TARGETPRIME (which prime to find)
' Returns: NTHPRIME
2000 NTHPRIME = 2
2010 FOUNDCOUNT = 0
2020 CANDIDATE = 2
2030 IF FOUNDCOUNT >= TARGETPRIME THEN GOTO 2100
2040 TESTNUM = CANDIDATE
2050 GOSUB 5000
2060 IF ISPRIME = 0 THEN GOTO 2080
2070 FOUNDCOUNT = FOUNDCOUNT + 1
2080 NTHPRIME = CANDIDATE
2090 CANDIDATE = CANDIDATE + 1
2100 IF FOUNDCOUNT < TARGETPRIME THEN GOTO 2040
2110 RETURN

' Subroutine: Sum of primes up to LIMIT
' Returns: PRIMESUM
3000 PRIMESUM = 0
3010 NUM = 2
3020 IF NUM > LIMIT THEN GOTO 3100
3030 TESTNUM = NUM
3040 GOSUB 5000
3050 IF ISPRIME = 0 THEN GOTO 3070
3060 PRIMESUM = PRIMESUM + NUM
3070 NUM = NUM + 1
3080 GOTO 3020
3100 RETURN

' Subroutine: Check if TESTNUM is prime
' Input: TESTNUM
' Returns: ISPRIME (1 if prime, 0 if not)
5000 IF TESTNUM < 2 THEN ISPRIME = 0: GOTO 5130
5010 IF TESTNUM = 2 THEN ISPRIME = 1: GOTO 5130
5020 IF TESTNUM MOD 2 = 0 THEN ISPRIME = 0: GOTO 5130
5030 ' Check odd divisors up to sqrt(TESTNUM)
5040 DIVISOR = 3
5050 IF DIVISOR * DIVISOR > TESTNUM THEN GOTO 5110
5060 IF TESTNUM MOD DIVISOR = 0 THEN GOTO 5100
5070 DIVISOR = DIVISOR + 2
5080 GOTO 5050
5100 ISPRIME = 0: GOTO 5130
5110 ISPRIME = 1
5130 RETURN
